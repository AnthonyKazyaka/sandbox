# Photo Analysis Review UI

A static HTML/CSS/JavaScript interface for reviewing photo analysis results generated by the Python Photo Analyzer.

## Features

- **No Dependencies**: Pure HTML, CSS, and JavaScript - no frameworks or build tools
- **File Upload**: Load `summary.json` files directly in the browser
- **Advanced Filtering**: Filter by blur level, person detection, pet detection, and centering
- **Sortable Columns**: Click headers to sort by blur score, center score, etc.
- **Mobile Responsive**: Works on desktop, tablet, and mobile devices
- **Offline Support**: Works completely offline via `file://` protocol

## Quick Start

1. Generate analysis results with the Python analyzer:
   ```bash
   python photo_analyzer/analyze_photos.py ~/Photos --summary-json summary.json
   ```

2. Open `index.html` in your browser:
   - Double-click the file
   - Or use a local server: `python -m http.server 8000`

3. Click "Choose JSON File" and select your `summary.json`

4. Use filters to find specific photos

## Files

```
photo_review_ui/
├── index.html    # Main HTML structure
├── review.js     # JavaScript logic
├── review.css    # Styling
└── README.md     # This file
```

## Expected JSON Format

The UI expects a JSON array with objects containing these fields:

```json
[
  {
    "path": "vacation/beach.jpg",
    "size_bytes": 2456789,
    "width": 4032,
    "height": 3024,
    "blur_score": 245.67,
    "blur_category": "sharp",
    "has_person": true,
    "has_pet": false,
    "center_score": 0.12,
    "center_category": "well_centered",
    "analyzed_at": "2024-01-15T10:30:00.000000"
  }
]
```

### Required Fields

| Field | Type | Description |
|-------|------|-------------|
| `path` | string | File path (relative or absolute) |
| `blur_score` | number | Numeric blur score (higher = sharper) |
| `blur_category` | string | "sharp", "soft", or "blurry" |
| `has_person` | boolean | Whether a person was detected |
| `has_pet` | boolean | Whether a pet was detected |
| `center_score` | number | Centering score (0 = centered) |
| `center_category` | string | "well_centered", "somewhat_centered", or "off_center" |

### Optional Fields

| Field | Type | Description |
|-------|------|-------------|
| `width` | number | Image width in pixels |
| `height` | number | Image height in pixels |
| `size_bytes` | number | File size in bytes |
| `analyzed_at` | string | ISO 8601 timestamp |

## Filter Options

### Blur Filter
- **All**: Show all photos
- **Sharp only**: Blur score ≥ 150
- **Soft only**: Blur score 50-150
- **Blurry only**: Blur score < 50

### Person Filter
- **All**: Show all photos
- **Yes**: Only photos with detected people
- **No**: Only photos without detected people

### Pet Filter
- **All**: Show all photos
- **Yes**: Only photos with detected pets (cats)
- **No**: Only photos without detected pets

### Centering Filter
- **All**: Show all photos
- **Well Centered**: Center score ≤ 0.15
- **Somewhat Centered**: Center score ≤ 0.35
- **Off Center**: Center score > 0.35

## Sortable Columns

Click on column headers with the sort indicator (▲/▼) to sort:

- **Path**: Alphabetical sort by file path
- **Blur Score**: Numeric sort (higher = sharper)
- **Center Score**: Numeric sort (lower = more centered)
- **Dimensions**: Sort by width

Click the same header again to reverse sort order.

## Workflow Example

### Finding Blurry Photos to Delete

1. Load your `summary.json`
2. Set Blur filter to "Blurry only"
3. Sort by blur_score (ascending)
4. Review the list of blurry photos

### Finding Well-Composed Pet Photos

1. Load your `summary.json`
2. Set Pet filter to "Yes"
3. Set Blur filter to "Sharp only"
4. Set Centering to "Well Centered"
5. Review your best pet photos

### Finding Photos with People

1. Load your `summary.json`
2. Set Person filter to "Yes"
3. Sort by center_score (ascending)
4. Best centered portraits appear first

## Mobile Usage

The UI is fully responsive:

- **Desktop**: Full table with all columns
- **Tablet**: Slightly condensed layout
- **Mobile**: Hidden "Dimensions" and "Centering" columns for better readability

## Hosting Options

### Local File System
Simply open `index.html` in your browser. Due to browser security, some features may be limited.

### Python HTTP Server
```bash
cd photo_review_ui
python -m http.server 8000
# Open http://localhost:8000
```

### Node.js Server
```bash
cd photo_review_ui
npx serve .
# Open http://localhost:3000
```

### Static Hosting
Upload all three files to any static hosting service:
- GitHub Pages
- Netlify
- Vercel
- Amazon S3
- Any web server

## Browser Compatibility

Tested and working on:
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+
- Mobile Chrome
- Mobile Safari

## Limitations

1. **Large Files**: Very large JSON files (100,000+ records) may cause browser slowdown
2. **File Paths**: The UI displays paths but cannot open files directly
3. **No Image Preview**: Images are not displayed; only metadata is shown
4. **Memory**: All data is held in memory; refresh clears the state

## Troubleshooting

### "Invalid JSON file" Error
- Ensure the file is valid JSON
- Check for encoding issues (use UTF-8)
- Verify the file was generated by the Photo Analyzer

### "Missing fields" Error
- The JSON must contain all required fields
- Check the "Required Fields" section above

### Table Not Displaying
- Check browser console for JavaScript errors
- Ensure all three files (HTML, CSS, JS) are in the same directory

### Slow Performance
- Consider processing fewer files at once
- Use filters to reduce displayed results
- Try a different browser

## Complete Workflow

1. **Analyze Photos**:
   ```bash
   python photo_analyzer/analyze_photos.py ~/Photos \
       --db photo_cache.sqlite \
       --summary-json summary.json
   ```

2. **Review Results**:
   - Open `photo_review_ui/index.html`
   - Load `summary.json`
   - Filter and sort to find photos of interest

3. **Take Action**:
   - Note paths of photos to delete
   - Identify photos needing editing
   - Find best photos for sharing

4. **Re-run as Needed**:
   - The analyzer caches results
   - Only changed files are re-analyzed
   - Load the new JSON to see updates
