<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Analysis Review</title>
    <meta name="description" content="Review and filter photo analysis results">
    <link rel="stylesheet" href="review.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <h1>üì∑ Photo Analysis Review</h1>
            <p class="subtitle">Load your analysis results and filter photos</p>
        </header>

        <!-- File Upload Section -->
        <section class="upload-section" id="uploadSection">
            <div class="upload-card">
                <div class="upload-icon">üìÅ</div>
                <h2>Load Analysis Results</h2>
                <p>Select your <code>summary.json</code> file from the photo analyzer</p>
                <input type="file" id="fileInput" accept=".json" class="file-input">
                <label for="fileInput" class="upload-button">
                    Choose JSON File
                </label>
                <div class="upload-hint">
                    Generated by: <code>python analyze_photos.py INPUT_DIR --summary-json summary.json</code>
                </div>
            </div>
        </section>

        <!-- Main Content (hidden until file loaded) -->
        <main class="main-content" id="mainContent" style="display: none;">
            <!-- Summary Stats -->
            <section class="stats-section">
                <div class="stat-card">
                    <div class="stat-value" id="totalCount">0</div>
                    <div class="stat-label">Total Photos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="filteredCount">0</div>
                    <div class="stat-label">Showing</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="personCount">0</div>
                    <div class="stat-label">With People</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="petCount">0</div>
                    <div class="stat-label">With Pets</div>
                </div>
            </section>

            <!-- Filters -->
            <section class="filters-section">
                <h2>üîç Filters</h2>
                <div class="filters-grid">
                    <!-- Blur Filter -->
                    <div class="filter-group">
                        <label for="blurFilter">Blur</label>
                        <select id="blurFilter" class="filter-select">
                            <option value="all">All</option>
                            <option value="sharp">Sharp only</option>
                            <option value="soft">Soft only</option>
                            <option value="blurry">Blurry only</option>
                        </select>
                    </div>

                    <!-- Person Filter -->
                    <div class="filter-group">
                        <label for="personFilter">Has Person</label>
                        <select id="personFilter" class="filter-select">
                            <option value="all">All</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>

                    <!-- Pet Filter -->
                    <div class="filter-group">
                        <label for="petFilter">Has Pet</label>
                        <select id="petFilter" class="filter-select">
                            <option value="all">All</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>

                    <!-- Center Filter -->
                    <div class="filter-group">
                        <label for="centerFilter">Centering</label>
                        <select id="centerFilter" class="filter-select">
                            <option value="all">All</option>
                            <option value="well_centered">Well Centered</option>
                            <option value="somewhat_centered">Somewhat Centered</option>
                            <option value="off_center">Off Center</option>
                        </select>
                    </div>
                </div>

                <div class="filter-actions">
                    <button id="resetFilters" class="btn btn-secondary">Reset Filters</button>
                    <button id="loadNewFile" class="btn btn-secondary">Load New File</button>
                </div>
            </section>

            <!-- Results Table -->
            <section class="results-section">
                <div class="results-header">
                    <h2>üìä Results</h2>
                    <span class="results-count" id="resultsCount">0 of 0 photos</span>
                </div>

                <div class="table-container">
                    <table class="results-table" id="resultsTable">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="path">Path</th>
                                <th class="sortable hide-mobile" data-sort="width">Dimensions</th>
                                <th class="sortable" data-sort="blur_score">Blur Score</th>
                                <th>Blur</th>
                                <th>Person</th>
                                <th>Pet</th>
                                <th class="sortable" data-sort="center_score">Center Score</th>
                                <th class="hide-mobile">Centering</th>
                            </tr>
                        </thead>
                        <tbody id="resultsBody">
                            <!-- Results will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <!-- Empty State -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-icon">üîç</div>
                    <h3>No results match your filters</h3>
                    <p>Try adjusting the filter criteria above</p>
                </div>
            </section>
        </main>

        <!-- Error Display -->
        <div class="error-message" id="errorMessage" style="display: none;">
            <span class="error-icon">‚ö†Ô∏è</span>
            <span class="error-text" id="errorText"></span>
            <button class="error-close" id="errorClose">&times;</button>
        </div>
    </div>

    <script src="review.js"></script>
</body>
</html>
